(window["webpackJsonpform-app"]=window["webpackJsonpform-app"]||[]).push([[0],{122:function(e,t,a){e.exports=a(268)},127:function(e,t,a){},268:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),s=a.n(o),l=(a(127),a(74),a(12)),i=a(9),c=a(14),p=a(15),u=a(17),d=a(46),m=a.n(d),h=a(13),f=a(50),v="http://192.168.0.251:8086/local/form/ajax_update_form.php?page=",g={url:v,connect:function(e){return Object(f.b)((function(e){return function(e){var t={};return Object.keys(e).forEach((function(a){"type"!==a&&(t[a]=e[a])})),t}(e)}),(function(e){return{setRedux:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({type:"redux"},e)}(t))}}}))(e)},skeletonObject:"",fetchData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"===typeof t&&t(),fetch("".concat(v+e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return g.skeletonObject=e}))},getRefElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=function(e){for(var n=0;n<t.length;n++)e=e.data[t[n]];return e.data.value=a};n(e)},setClasses:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];(t&&(n=t),a)&&(e=n).push.apply(e,Object(h.a)(Object.keys(a).map((function(e){return a[e]&&e})).filter((function(e){return e}))));return n.join(" ")}},b=g,E=a(18),O=a(302),_=a(296),j=a(300),y=a(301);var x=b.connect((function(e){return r.a.createElement("div",{onClick:function(){e.addItem(e.value)},className:"model_name"},e.value.model)})),w=function(e){return r.a.createElement("p",null," ","".concat(e.type," is not supporting")," ")},N=function(e){return r.a.createElement("div",{className:"hidden dispaly_none"},r.a.createElement("p",{className:"form_label"},e.label))},k=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"form_label"},e.label),r.a.createElement(O.a,{onChange:e.changeValue,required:!!e.required,className:"full_width input_margin",multiline:!0}))},P=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"form_label"},e.label),r.a.createElement(_.a,{onChange:e.changeValue,name:e.name,type:"date",required:!!e.required,className:b.setClasses(["full_width","input_margin"],{error:e.validation&&e.required})}))},V=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"form_label"},e.label),r.a.createElement(_.a,{onChange:e.changeValue,name:e.name,type:"date",required:!!e.required,className:b.setClasses(["full_width","input_margin"],{error:e.validation&&e.required})}))},C=function(e){return r.a.createElement("div",{className:b.setClasses(["full_width","select"],{hidden:0==e.options,error:e.validation&&e.required})},r.a.createElement("p",{className:"form_label"},e.label),r.a.createElement(j.a,{onChange:e.changeValue,className:b.setClasses(["full_width"],{error:e.validation}),value:e.valueInput,required:!!e.required},Object.entries(e.options).map((function(e,t){return r.a.createElement(y.a,{key:t,value:e[1]},e[1])}))))},R=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"form_label"},e.label),r.a.createElement(_.a,{onChange:e.changeValue,readOnly:"cost"===e.name||"name"===e.name,name:e.name,type:"text",value:"cost"!==e.name&&"name"!==e.name?e.valueInput:e.value,required:!!e.required,className:b.setClasses(["form_label full_width","input_margin"],{error:e.validation&&e.required})}),"model"===e.name&&e.helpList&&r.a.createElement("div",{className:"help_list"},e.helpList.map((function(t,a){return r.a.createElement(x,{addItem:e.addModel,value:t,key:a,indexEl:a})}))),e.validation&&e.required&&r.a.createElement("span",{className:"error_message"},"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u0435\u043d\u0438\u044f"))};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).addModel=function(e){},a.changeValue=function(e){var t=new FormData,n=a.props.data.data,r=S({},a.props.apiPage);e.target.value?a.setState({isError:!1}):a.setState({isError:!0});if(a.setState({valueInput:e.target.value}),b.getRefElement(r,a.props.path,e.target.value),a.props.setRedux({toReduxValue:r}),"select"===n.type&&!n.dependence&&n.value)!function(){var e=!1;r.data[a.props.keyGroup].data.forEach((function(a){if(!a.data.dependence&&"hidden"!==a.type){var n=(r=a.data.options,o=a.data.value,Object.keys(r).find((function(e){return r[e]===o})));t.append("".concat(a.data.name,"[]"),n),e=!!a.data.value}var r,o})),e&&fetch("".concat(b.url),{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){var t=S({},a.props.toReduxValue);t.data[a.props.keyGroup].data.map((function(n,r){if(n.data.dependence){var o=e.fields.distributors[0].options;t.data[a.props.keyGroup].data[r].data.options=o,a.props.setRedux({dependenceValues:t})}return a.props.dependenceValues}))}))}();else if("model"===n.name)t.append("model",e.target.value),fetch("".concat(b.url),{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){e.error?a.setState({helpList:!1}):a.setState({helpList:e.products}),e.products&&Object.entries(e.products).map((function(e){return e[1].model.toUpperCase()===a.state.valueInput.toUpperCase()&&(a.setState({helpList:!1}),a.setState({current:e[1]})),a.state}))})).then((function(e){if(a.state.current){var t=S({},a.props.toReduxValue);t.data[a.props.path[0]].data[a.props.path[1]].data[0].data.map((function(e){switch(e.data.name){case"cost":e.data.value=parseInt(a.state.current.cost);var n=e.data.value;return a.props.setRedux({newReduxValues:t,stateValue:n});case"name":return e.data.value=a.state.current.name,a.props.setRedux({newReduxValues:t})}return a.props.newReduxValues}))}}));else if("count"===n.name){var o=function(e){var t=S({},a.props.newReduxValues);t.data[a.props.path[0]].data[a.props.path[1]].data[0].data.map((function(n){if("cost"===n.data.name&&n.data.value){var r=a.props.stateValue;n.data.value=e?r:r*a.state.valueInput}return a.props.setRedux({countValueToRedux:t})}))};e.target.value>0?a.setState({valueInput:e.target.value.replace(/\D/,"")},(function(){o()})):a.setState({valueInput:1},(function(){o(!0)}))}},a.state={helpList:!1,valueInput:"",current:"",currentPrice:0,isError:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){switch(this.props.data.type){case"text":return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{value:this.props.data.data.value,valueInput:this.state.valueInput,label:this.props.data.data.label,changeValue:this.changeValue,name:this.props.data.data.name,validation:this.state.isError,required:this.props.data.data.required,helpList:this.state.helpList}));case"select":return r.a.createElement(C,{changeValue:this.changeValue,name:this.props.data.data.name,valueInput:this.state.valueInput,value:this.props.data.data.value,dependence:this.props.data.data.dependence,required:this.props.data.data.required,options:this.props.data.data.options,validation:this.state.isError,label:this.props.data.data.label});case"date":return r.a.createElement(V,{label:this.props.data.data.label,changeValue:this.changeValue,name:this.props.data.data.name,validation:this.state.isError,required:this.props.data.data.required});case"date_list":return r.a.createElement(P,{label:this.props.data.data.label,changeValue:this.changeValue,name:this.props.data.data.name,validation:this.state.isError,required:this.props.data.data.required});case"textarea":return r.a.createElement(k,{label:this.props.data.data.label,changeValue:this.changeValue,required:this.props.data.data.required,validation:this.state.isError});case"hidden":return r.a.createElement(N,{label:this.props.data.data.label});case"group":var e=S({},this.props.keyGroup);return e=this.props.indexEl,this.props.setRedux({newKey:e}),r.a.createElement(L,{keyGroup:this.props.indexEl,path:Object(h.a)(this.props.path),data:this.props.data});default:return r.a.createElement(w,{type:this.props.data.data.type})}}}]),t}(r.a.Component),D=b.connect(I);var L=b.connect((function(e){return r.a.createElement("div",{className:"form_groups wrapper full_width"},r.a.createElement("h2",{className:"title_group full_width"},e.data.title),"hidden"!==e.data.type&&e.data.data.map((function(t,a){return r.a.createElement(D,{path:[].concat(Object(h.a)(e.path),[a]),key:a,indexEl:a,keyGroup:e.indexGroup,data:t})})))}));function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).removeElementAds=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props.addStateToRedux);e.data.splice(a.props.newPath,1),a.props.setRedux({deleteStateToRedux:e})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.removeElementAds,className:"button next_button button_add button_delete_margin_left",variant:"contained"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")}}]),t}(r.a.Component),T=b.connect(G),A=a(114),U=a.n(A),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).addingItem=function(){var e=b.skeletonObject.data[a.props.index];console.log(e);var t=U()(a.props.dataApi);t.data.push(e),a.props.setRedux({addStateToRedux:t})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{onClick:this.addingItem,className:"button next_button button_add",variant:"contained"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")}}]),t}(r.a.Component),M=b.connect(X),B=function(e){function t(e){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex"},r.a.createElement(M,{dataApi:this.props.dataApi,index:this.props.index}),this.props.dataApi.data[this.props.index].duplicate&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{dataApi:this.props.dataApi,newPath:this.props.index})))}}]),t}(r.a.Component),J=b.connect(B),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).changePage=function(e){var t=a.props.page;e.target.classList.contains("back_button")?t-=1:t+=1,b.fetchData(t,(function(){a.setState({isLoad:!0})})).then((function(e){a.props.setRedux({apiPage:e}),a.setState({isLoad:!1}),a.props.setRedux({page:t})}))},a.state={isLoad:!1,indexes:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props),r.a.createElement(r.a.Fragment,null,!this.state.isLoad&&r.a.createElement("div",{className:"form_page flex_center"},r.a.createElement("h1",{className:"form__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"),r.a.createElement("div",{className:"form_block"},this.props.apiPage.data.map((function(t,a){if("hidden"!==t.type)return r.a.createElement(r.a.Fragment,{key:a+"fragment"},r.a.createElement(L,{path:[a],key:a,indexGroup:a,data:t}),r.a.createElement(J,{key:t,dataApi:e.props.apiPage,index:a}))}))),0===this.props.page&&r.a.createElement("div",{onClick:this.changePage,className:"button next_button",variant:"contained"},"\u0414\u0430\u043b\u0435\u0435"),1===this.props.page&&r.a.createElement("div",{className:"flex mg_top_btns"},r.a.createElement("div",{onClick:this.changePage,className:"button next_button",variant:"contained"},"\u0414\u0430\u043b\u0435\u0435"),r.a.createElement("div",{onClick:this.changePage,className:"button left_btn_margin back_button ",variant:"contained"},"\u041d\u0430\u0437\u0430\u0434")),2===this.props.page&&r.a.createElement("div",{onClick:this.changePage,className:"button back_button",variant:"contained"},"\u041d\u0430\u0437\u0430\u0434")),this.state.isLoad&&r.a.createElement("div",{className:"flex wrapper_loader"},r.a.createElement("img",{src:m.a,alt:"preloader",className:"preloader"}),!this.props.apiPage.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"preloader_text"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")),this.props.apiPage.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"preloader_text"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),r.a.createElement("p",{className:"preloader_text"},this.props.apiPage.error))))}}]),t}(r.a.Component),z=b.connect(W),K=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.fetchData(this.props.page).then((function(t){e.props.setRedux({apiPage:t})}))}},{key:"render",value:function(){return this.props.apiPage.status?r.a.createElement("section",{className:"form_page_wrapper full_screen flex_center"},r.a.createElement(z,null)):r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"flex wrapper_loader"},r.a.createElement("img",{src:m.a,alt:"preloader",className:"preloader"}),!this.props.apiPage.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"preloader_text"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")),this.props.apiPage.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"preloader_text"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),r.a.createElement("p",{className:"preloader_text"},this.props.apiPage.error))))}}]),t}(r.a.Component),$=b.connect(K);var H=function(){return r.a.createElement("div",{className:"App"},r.a.createElement($,null))},Q=a(47);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(138);var Y={page:0,apiPage:{data:[],resposneServer:!1},empty:{},fieldConfig:[],fieldValues:[],sizeGroup:[],fieldGroup:[],countForms:[],sendData:"",changeValue:""},Z=Object(Q.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,t)}),Y,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(r.a.createElement(f.a,{store:Z},r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},46:function(e,t,a){e.exports=a.p+"static/media/preloader.aebd064e.gif"},74:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.9aee4fe7.chunk.js.map