(window["webpackJsonpform-app"]=window["webpackJsonpform-app"]||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/preloader.13f1441c.gif"},48:function(e,t,a){},59:function(e,t,a){e.exports=a(77)},64:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(7),o=a.n(s),i=(a(64),a(48),a(12)),l=a(9),c=a(15),u=a(16),p=a(18),d=a(28),m=a.n(d),h=a(13),v=a(38),f=a(34),g=a.n(f),b="http://192.168.0.251:8086/local/form/ajax_update_form.php?page=",E=document.querySelector(".local_form_properties")?document.querySelector(".local_form_properties"):void 0,O=(E&&E.getAttribute("data-url"),E?E.getAttribute("data-project_id-url"):void 0),y={url:b,connect:function(e){return Object(v.b)((function(e){return function(e){var t={};return Object.keys(e).forEach((function(a){"type"!==a&&(t[a]=e[a])})),t}(e)}),(function(e){return{setRedux:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({type:"redux"},e)}(t))}}}))(e)},clearObject:{},getClearObject:function(e){return fetch("".concat("http://192.168.0.251:8086/local/form/ajax_update_form.php?method=get_empty&page="+e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return y.clearObject=g()(e.data.filter((function(e){return"hidden"!==e.type})))}))},fetchData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return"function"===typeof t&&t(),fetch(E?"".concat(b+e,"?method=get&project_id=").concat(O):"".concat(b+e),{method:"GET"}).then((function(e){return e.json()}))},saveData:function(e){return fetch("".concat(b),{method:"POST",body:e}).then((function(e){return e.json()}))},getRefElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=function(e){for(var r=0;r<t.length;r++)e=e.data[t[r]];return e.data.value=a};r(e)},setClasses:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];(t&&(r=t),a)&&(e=r).push.apply(e,Object(h.a)(Object.keys(a).map((function(e){return a[e]&&e})).filter((function(e){return e}))));return r.join(" ")},isError:!1,validation:function(e,t){if(t)return e?"":"error_empty"}},_=y,j=a(14),x=a(111),w=a(105),P=a(109),S=a(110),N=function(e){return n.a.createElement("p",null," ","".concat(e.type," is not supporting")," ")},R=function(e){return n.a.createElement("div",{className:"hidden dispaly_none"},n.a.createElement("p",{className:"form_label"},e.label))},k=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"form_label ".concat(_.validation(e.valueInput||e.value,e.isError))},e.label),n.a.createElement(x.a,{onChange:e.changeValue,required:!!e.required,value:e.valueInput,rows:5,variant:"filled",className:"full_width input_margin ".concat(_.validation(e.valueInput||e.value,e.isError)),multiline:!0}))},I=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"form_label ".concat(_.validation(e.valueInput||e.value,e.isError))},e.label),n.a.createElement(w.a,{onChange:e.changeValue,name:e.name,type:"date",value:e.valueInput,required:!!e.required,className:"full_width input_margin ".concat(_.validation(e.valueInput||e.value,e.isError))}))},V=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"form_label ".concat(_.validation(e.valueInput||e.value,e.isError))},e.label),n.a.createElement(w.a,{onChange:e.changeValue,name:e.name,type:"date",value:e.valueInput,required:!!e.required,className:"full_width input_margin ".concat(_.validation(e.valueInput||e.value,e.isError))}))},C=function(e){return n.a.createElement("div",{className:_.setClasses(["full_width","select"],{hidden:0==e.options,error:e.validation&&e.required})},n.a.createElement("p",{className:"form_label ".concat(_.validation(e.value,e.isError))},e.label),n.a.createElement(P.a,{onChange:e.changeValue,className:"full_width ".concat(_.validation(e.value,e.isError)),value:e.valueInput?e.valueInput:e.value,required:!!e.required},Object.entries(e.options).map((function(e,t){return n.a.createElement(S.a,{key:t,value:e[0]},e[1])}))))},D=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"form_label ".concat(_.validation(e.value,e.isError))},e.label),n.a.createElement(w.a,{onChange:e.changeValue,readOnly:"cost"===e.name||"name"===e.name,name:e.name,type:"text",value:"cost"!==e.name&&"name"!==e.name?e.valueInput:e.value,required:!!e.required,onFocus:e.focusCount,className:"full_width input_margin ".concat(_.validation(e.value,e.isError))}),e.validation&&e.required&&n.a.createElement("span",{className:"error_message"},"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u0435\u043d\u0438\u044f"))};var q=_.connect((function(e){return n.a.createElement("div",{onClick:function(){e.addItem(e.value)},className:"model_name"},e.value.model)}));function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).focusCount=function(e){"count"!==a.props.data.data.name||a.state.valueInput||a.setState({valueInput:1})},a.addModel=function(e){var t=T({},a.props.toReduxValue);t.data[a.props.path[0]].data[a.props.path[1]].data[0].data.map((function(r){switch(r.data.name){case"cost":r.data.value=parseInt(e.cost);var n=r.data.value;return a.props.setRedux({stateValue:n}),a.props.setRedux({addModelToRedux:t});case"name":return r.data.value=e.name,a.props.setRedux({addModelToRedux:t});case"model":return r.data.value=e.id,a.setState({valueInput:e.model}),a.props.setRedux({addModelToRedux:t})}return a.setState({helpList:!1}),a.props.newReduxValues}))},a.changeValue=function(e){var t=new FormData,r=a.props.data.data,n=T({},a.props.apiPage);if(a.setState({valueInput:e.target.value}),e.target.value?a.setState({isError:!1}):a.setState({isError:!0}),_.getRefElement(n,a.props.path,e.target.value),a.props.setRedux({toReduxValue:n}),"select"===r.type&&!r.dependence&&r.value)!function(){var e=!1;n.data[a.props.keyGroup].data.forEach((function(a){if(!a.data.dependence&&"hidden"!==a.type){var r=a.data.value;t.append("".concat(a.data.name,"[]"),r),e=!!a.data.value}})),e&&fetch("".concat(_.url),{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){var t=T({},a.props.toReduxValue);t.data[a.props.keyGroup].data.map((function(r,n){if(r.data.dependence){var s=e.fields.distributors[0].options;t.data[a.props.keyGroup].data[n].data.options=s,a.props.setRedux({dependenceValues:t})}return a.props.dependenceValues}))}))}();else if("model"===r.name){if(t.append("model",e.target.value),fetch("".concat(_.url),{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){e.error?a.setState({helpList:!1}):a.setState({helpList:e.products}),e.products&&Object.entries(e.products).map((function(e){return e[1].model.toUpperCase()===a.state.valueInput.toUpperCase()&&a.setState({current:e[1],complete:!0,helpList:!1}),a.state}))})).then((function(e){if(a.state.current){var t=T({},a.props.toReduxValue);t.data[a.props.path[0]].data[a.props.path[1]].data[0].data.map((function(e){switch(e.data.name){case"cost":e.data.value=parseInt(a.state.current.cost);var r=e.data.value;return a.props.setRedux({stateValue:r}),a.props.setRedux({newReduxValues:t});case"name":return e.data.value=a.state.current.name,a.props.setRedux({newReduxValues:t});case"model":return e.data.value=a.state.current.id,a.setState({valueInput:e.data.value}),a.props.setRedux({newReduxValues:t})}return a.props.newReduxValues}))}})),e.target.value!==a.state.current.name&&a.state.complete||!e.target.value){var s=T({},a.props.newReduxValues);s.data[a.props.path[0]].data[a.props.path[1]].data[0].data.map((function(e){switch(e.data.name){case"cost":e.data.value="";var t=e.data.value;return a.props.setRedux({stateValue:t}),a.props.setRedux({removeToRedux:s});case"name":return e.data.value="",a.props.setRedux({removeToRedux:s})}return a.setState({complete:!1,current:""}),a.props.removeToRedux}))}}else if("count"===r.name&&a.props.stateValue){var o=function(e){var t=T({},a.props.newReduxValues);t.data[a.props.path[0]].data[a.props.path[1]].data[0].data.map((function(r){if("cost"===r.data.name&&r.data.value){var n=a.props.stateValue;r.data.value=e?n:n*a.state.valueInput}return a.props.setRedux({countValueToRedux:t})}))};e.target.value>0?a.setState({valueInput:e.target.value.replace(/\D/,"")},(function(){o()})):(a.setState({valueInput:1},(function(){o(!0)})),e.target.value=1)}},a.state={helpList:!1,valueInput:"",current:"",currentPrice:0,isError:!1,complete:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.data.data.value&&this.setState({valueInput:this.props.data.data.value})}},{key:"render",value:function(){var e=this;switch(this.props.data.type){case"text":return n.a.createElement(n.a.Fragment,null,this.props.isError&&this.props.typeError&&this.props.typeError.map((function(t){var a=Object.keys(t.data).filter((function(t){return e.props.data.data.name===t}));return n.a.createElement("p",{class:"error_message"},t.data[a])})),n.a.createElement(D,{valueInput:this.state.valueInput,label:this.props.data.data.label,changeValue:this.changeValue,name:this.props.data.data.name,value:this.props.data.data.value,validation:this.state.isError,isError:this.props.isError,focusCount:this.focusCount,required:this.props.data.data.required,helpList:this.state.helpList}),"model"===this.props.data.data.name&&this.state.helpList&&n.a.createElement("div",{className:"help_list"},this.state.helpList.map((function(t,a){return n.a.createElement(q,{addItem:e.addModel,value:t,key:a,indexEl:a})}))));case"select":return n.a.createElement(C,{changeValue:this.changeValue,name:this.props.data.data.name,valueInput:this.state.valueInput,value:this.props.data.data.value,dependence:this.props.data.data.dependence,required:this.props.data.data.required,options:this.props.data.data.options,validation:this.state.isError,label:this.props.data.data.label,isError:this.props.isError});case"date":return n.a.createElement(V,{label:this.props.data.data.label,changeValue:this.changeValue,name:this.props.data.data.name,validation:this.state.isError,valueInput:this.state.valueInput,isError:this.props.isError,value:this.props.data.data.value,required:this.props.data.data.required});case"date_list":return n.a.createElement(I,{label:this.props.data.data.label,changeValue:this.changeValue,name:this.props.data.data.name,validation:this.state.isError,isError:this.props.isError,valueInput:this.state.valueInput,value:this.props.data.data.value,required:this.props.data.data.required});case"textarea":return n.a.createElement(k,{label:this.props.data.data.label,changeValue:this.changeValue,required:this.props.data.data.required,valueInput:this.state.valueInput,isError:this.props.isError,validation:this.state.isError,value:this.props.data.data.value});case"hidden":return n.a.createElement(R,{label:this.props.data.data.label});case"group":return n.a.createElement(G,{keyGroup:this.props.indexEl,path:Object(h.a)(this.props.path),data:this.props.data});default:return n.a.createElement(N,{type:this.props.data.data.type})}}}]),t}(n.a.Component),F=_.connect(A);var G=_.connect((function(e){return n.a.createElement("div",{className:"form_groups wrapper full_width animate_group"},n.a.createElement("h2",{className:"title_group full_width"},e.data.title),"hidden"!==e.data.type&&e.data.data.map((function(t,a){return n.a.createElement(F,{path:[].concat(Object(h.a)(e.path),[a]),key:a,indexEl:a,keyGroup:e.indexGroup,data:t})})))}));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).removeElementAds=function(){var e=a.props.addStateToRedux?U({},a.props.addStateToRedux):U({},a.props.apiPage);delete e.data[a.props.newPath],a.props.setRedux({deleteStateToRedux:e})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{onClick:this.removeElementAds,className:"button next_button button_add button_delete_margin_left",variant:"contained"})}}]),t}(n.a.Component),J=_.connect(X);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var W=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).addingItem=function(){var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props.apiPage),t=g()(a.props.newPath);g()(_.clearObject).map((function(r){return e.data[t].data.length===r.data.length&&(e.data[t].title===r.title?(e.data.splice(t+1,0,r),r.duplicate=!0,a.props.setRedux({addStateToRedux:e})):void 0)}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{onClick:this.addingItem,className:"button next_button button_add",variant:"contained"})}}]),t}(n.a.Component),$=_.connect(W),z=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"flex"},n.a.createElement($,{fields:this.props.fields,type:this.props.type,dataApi:this.props.dataApi,newPath:this.props.index}),this.props.dataApi.data[this.props.index].duplicate&&n.a.createElement(n.a.Fragment,null,n.a.createElement(J,{dataApi:this.props.dataApi,newPath:this.props.index})))}}]),t}(n.a.Component),H=_.connect(z),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).changePage=function(e){var t=e.target,r=a.props.page,n=JSON.stringify({data:a.props.apiPage.data,type:"section",method:"save",page:r});(a.setState({isSaveProgress:!0}),t.classList.contains("back_button"))?(t.classList.contains("back_button")?r-=1:r<2?r+=1:r=0,_.fetchData(r,(function(){a.setState({isLoad:!0})})).then((function(e){a.props.setRedux({apiPage:e}),a.setState({isLoad:!1}),a.props.setRedux({page:r}),a.setState({isSaveProgress:!1})})),_.getClearObject(r)):_.saveData(n).then((function(e){e.errors?a.props.setRedux({isError:!0,typeError:e.errors}):a.props.setRedux({isError:!1}),a.setState({isSaveProgress:!1}),console.log(e)})).then((function(){a.props.isError||(t.classList.contains("back_button")?r-=1:r<2?r+=1:r=0,_.fetchData(r,(function(){a.setState({isLoad:!0})})).then((function(e){a.props.setRedux({apiPage:e}),a.setState({isLoad:!1}),a.props.setRedux({page:r}),a.setState({isSaveProgress:!1})})),_.getClearObject(r))}))},a.state={isLoad:!1,indexes:[],isSaveProgress:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,!this.state.isLoad&&n.a.createElement("div",{className:"form_page flex_center"},n.a.createElement("h1",{className:"form__title"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"),n.a.createElement("div",{className:"form_block"},this.props.isError&&n.a.createElement("span",{className:"error_message"},"\u041d\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),this.props.apiPage.data.map((function(t,a){return!(!t||"hidden"===t.type)&&n.a.createElement(n.a.Fragment,{key:a+"fragment"},n.a.createElement(G,{path:[a],key:a,indexGroup:a,data:t}),n.a.createElement(H,{fields:t.data,type:t.type,key:t,dataApi:e.props.apiPage,index:a}))}))),0===this.props.page&&!this.state.isSaveProgress&&n.a.createElement("div",{onClick:this.changePage,className:"button next_button",variant:"contained"},"\u0414\u0430\u043b\u0435\u0435"),0===this.props.page&&this.state.isSaveProgress&&n.a.createElement("img",{src:m.a,alt:"btn_loader",className:"loader_button"}),1===this.props.page&&!this.state.isSaveProgress&&n.a.createElement("div",{className:"flex mg_top_btns"},n.a.createElement("div",{onClick:this.changePage,className:"button next_button",variant:"contained"},"\u0414\u0430\u043b\u0435\u0435"),n.a.createElement("div",{onClick:this.changePage,className:"button left_btn_margin back_button ",variant:"contained"},"\u041d\u0430\u0437\u0430\u0434")),1===this.props.page&&this.state.isSaveProgress&&n.a.createElement("img",{src:m.a,alt:"btn_loader",className:"loader_button"}),2===this.props.page&&!this.state.isSaveProgress&&n.a.createElement("div",{className:"flex mg_top_btns"},n.a.createElement("div",{onClick:this.changePage,className:"button next_button",variant:"contained"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),n.a.createElement("div",{onClick:this.changePage,className:"button left_btn_margin back_button ",variant:"contained"},"\u041d\u0430\u0437\u0430\u0434")),2===this.props.page&&this.state.isSaveProgress&&n.a.createElement("img",{src:m.a,alt:"btn_loader",className:"loader_button"})),this.state.isLoad&&n.a.createElement("div",{className:"flex wrapper_loader"},n.a.createElement("img",{src:m.a,alt:"preloader",className:"preloader"}),this.props.apiPage.error&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"preloader_text"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),n.a.createElement("p",{className:"preloader_text"},this.props.apiPage.error))))}}]),t}(n.a.Component),Q=_.connect(K),Y=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.fetchData(this.props.page).then((function(t){e.props.setRedux({apiPage:t,empty:t})})),_.getClearObject(this.props.page)}},{key:"render",value:function(){return this.props.apiPage.status?n.a.createElement("section",{className:"form_page_wrapper full_screen flex_center"},n.a.createElement(Q,null)):n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"flex wrapper_loader"},n.a.createElement("img",{src:m.a,alt:"preloader",className:"preloader"}),this.props.apiPage.error&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"preloader_text"},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),n.a.createElement("p",{className:"preloader_text"},this.props.apiPage.error))))}}]),t}(n.a.Component),Z=_.connect(Y);var ee=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(Z,null))},te=a(35);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae={page:0,apiPage:{data:[],resposneServer:!1},sendData:""},re=Object(te.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,t)}),ae,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(n.a.createElement(v.a,{store:re},n.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.09b17201.chunk.js.map